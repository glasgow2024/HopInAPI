{
	"info": {
		"_postman_id": "ffbb8029-5de8-48e8-b9f0-6a3f5c278e72",
		"name": "HopIn",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "HealthCheck",
			"id": "8c36e296-51d3-40a0-8201-e1864b054be5",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/health"
			},
			"response": []
		},
		{
			"name": "Get organisation and set organisation id",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "6ce4ec1d-06e7-4e92-896e-23e49cbf5bcf",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"var org = response.data.find(c=> { return c.attributes.name == pm.collectionVariables.get(\"organization_name\")});",
							"pm.collectionVariables.set(\"organization_id\", org.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "a2133e8b-475a-46c4-998e-e825384b8028",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/organizations"
			},
			"response": []
		},
		{
			"name": "Get events and set event id",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a61fabd3-c6d7-4938-9c19-cb973b37dd5a",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"var event = response.data.find(c=> { return c.attributes.name == pm.collectionVariables.get(\"event_name\")});",
							"pm.collectionVariables.set(\"event_id\", event.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "a5775e6b-0702-45bc-87ef-f5c772b0cb09",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/organizations/{{organization_id}}/events"
			},
			"response": []
		},
		{
			"name": "Get all schedule items",
			"id": "531a6fcd-c732-4fd2-bd52-152180b48a6c",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/events/{{event_id}}/scheduleItems"
			},
			"response": []
		},
		{
			"name": "Get all sessions",
			"id": "e3c86468-d14f-4dff-9cde-4a78bfad5696",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/events/{{event_id}}/sessions"
			},
			"response": []
		},
		{
			"name": "Get ticket types",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65fd00f0-d681-4eb8-b4bd-11999af02c59",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"var ticket = response.data.find(c=> { return c.attributes.name == \"WSFS\"});",
							"pm.collectionVariables.set(\"wsfs_member_ticket\", ticket.id);",
							"",
							"var ticket = response.data.find(c=> { return c.attributes.name == \"Free\"});",
							"pm.collectionVariables.set(\"attending_member_ticket\", ticket.id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "0759e31b-9cda-4d82-991e-25a37e0d4289",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/events/{{event_id}}/tickets"
			},
			"response": []
		},
		{
			"name": "Get registrants",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65fd00f0-d681-4eb8-b4bd-11999af02c59",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"var ticket = response.data.find(c=> { return c.attributes.name == \"WSFS\"});",
							"pm.collectionVariables.set(\"wsfs_member_ticket\", ticket.id);",
							"",
							"var ticket = response.data.find(c=> { return c.attributes.name == \"Free\"});",
							"pm.collectionVariables.set(\"attending_member_ticket\", ticket.id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "9c6de265-2e5c-44c9-869a-62e66acc0c0c",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/events/{{event_id}}/registrations"
			},
			"response": []
		},
		{
			"name": "Create magic link for WSFS",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65fd00f0-d681-4eb8-b4bd-11999af02c59",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"const registrantDetails = { email: response.data.attributes.email, link: response.data.attributes.magicLink };",
							"",
							"pm.collectionVariables.set(\"newRegistrant\", JSON.stringify(registrantDetails));",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "fb9bcc09-2983-4651-afa3-4ec083a33575",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"data\": {\n    \"type\": \"magicLink\",\n    \"attributes\": {\n      \"email\": \"fionna.osullivan+postmantest2@gmail.com\",\n      \"extraFields\": {\n      },\n      \"firstName\": \"Mo\",\n      \"headline\": \"\",\n      \"lastName\": \"Shields\",\n      \"metadata\": {\n        \n      },\n      \"registrationId\": \"\"\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{server}}/v1/tickets/{{wsfs_member_ticket}}/magicLinks"
			},
			"response": []
		},
		{
			"name": "Create magic link for Attending member",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65fd00f0-d681-4eb8-b4bd-11999af02c59",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "b3ca9c49-5a04-4f42-90d2-a0364d6cb8aa",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"data\": {\n    \"type\": \"magicLink\",\n    \"attributes\": {\n      \"email\": \"dummy.email.fos+postmantest3@gmail.com\",\n      \"extraFields\": {\n      },\n      \"firstName\": \"Brenda\",\n      \"headline\": \"\",\n      \"lastName\": \"Shields\",\n      \"metadata\": {\n        \n      },\n      \"registrationId\": \"\"\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{server}}/v1/tickets/{{attending_member_ticket}}/magicLinks"
			},
			"response": []
		},
		{
			"name": "Get all magic links for Attending members",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65fd00f0-d681-4eb8-b4bd-11999af02c59",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "4df813c0-5099-4700-bed4-453f9d2821f7",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{server}}/v1/tickets/{{attending_member_ticket}}/magicLinks"
			},
			"response": []
		},
		{
			"name": "Get all magic links for WSFS members",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65fd00f0-d681-4eb8-b4bd-11999af02c59",
						"exec": [
							"var response = JSON.parse(responseBody);",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "c33178d1-a71c-41b0-b16d-f512b4b3f2cd",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"data\": {\n    \"type\": \"magicLink\",\n    \"attributes\": {\n      \"email\": \"fionna.osullivan+postmantest2@gmail.com\",\n      \"extraFields\": {\n      },\n      \"firstName\": \"Brenda\",\n      \"headline\": \"\",\n      \"lastName\": \"Shields\",\n      \"metadata\": {\n        \n      },\n      \"registrationId\": \"\"\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{server}}/v1/tickets/{{wsfs_member_ticket}}/magicLinks"
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": {
			"token": "{{apikey}}"
		}
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "214215ab-5c11-4ea8-b97a-045b3e73a4ff",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "20c61a84-da96-4ccb-95c1-c82708786999",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "cd3cb3a5-a398-4cc1-a47d-2ca52d765f9a",
			"key": "server",
			"value": "https://api.hopin.com/",
			"type": "string"
		},
		{
			"id": "85b94b93-a486-4169-bb29-87a12d355b5d",
			"key": "apikey",
			"value": "",
			"type": "string"
		},
		{
			"id": "7c02ba66-f934-4de1-a5bf-f5970b48bc0a",
			"key": "organization_name",
			"value": "Glasgow Worldcon",
			"type": "string"
		},
		{
			"id": "084baf9b-df69-4e8d-95e9-f399c76e7e39",
			"key": "organization_id",
			"value": ""
		},
		{
			"id": "13f924e1-7f4c-4b27-af5c-e066bcf16370",
			"key": "event_name",
			"value": "Glasgow Demo",
			"type": "string"
		},
		{
			"id": "ed7ea319-7793-4442-b1c3-74c72111675b",
			"key": "event_id",
			"value": ""
		},
		{
			"id": "c2f5a2e4-4550-414e-b936-23ff18ef39a9",
			"key": "wsfs_member_ticket",
			"value": ""
		},
		{
			"id": "d55d87a6-f6c9-43c6-b472-0b0d5c682609",
			"key": "attending_member_ticket",
			"value": ""
		},
		{
			"id": "f56300db-2b96-49f1-a457-eda249557694",
			"key": "newRegistrant",
			"value": ""
		}
	]
}